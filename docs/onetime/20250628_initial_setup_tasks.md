# termfeed 初期セットアップタスクリスト

作成日: 2025-06-28

## フェーズ1: 基礎構築 ✅ 完了 (2025-06-28)

### プロジェクトセットアップ

- [x] プロジェクトの初期化
  - [x] package.json の作成
  - [x] TypeScript の設定
  - [x] ESLint / Prettier の設定
  - [x] .gitignore の作成
  - [x] テストフレームワークの設定（Jest または Vitest）→ Vitestを採用
  - [x] GitHub Actions の設定
    - [x] テスト実行のワークフロー
    - [x] Lint チェックのワークフロー
  - [x] pre-commit設定の追加（追加実装）
  - [x] GitHub Actionsのセキュリティ強化（コミットハッシュ固定）（追加実装）

### 基本構造の構築

- [x] ディレクトリ構造の作成
  - [x] src/models/ - データ層
  - [x] src/services/ - ビジネスロジック層
  - [x] src/cli/ - プレゼンテーション層
  - [x] src/index.ts - エントリーポイント（追加実装）

### データベース基盤

- [x] SQLite データベースのセットアップ
  - [x] better-sqlite3 のインストール
  - [x] データベーススキーマの定義
  - [x] マイグレーションスクリプトの作成
  - [x] DatabaseManagerクラスの実装（追加実装）
  - [x] DatabaseManagerのテストの作成（追加実装）
  - [x] 型定義の一部作成（Feed, Article インターフェース）（追加実装）

## フェーズ2: コア機能開発 ✅ 完了 (2025-06-28)

### モデル層の実装 ✅ 完了 (2025-06-28)

- [x] 型定義の作成
  - [x] Feed タイプ（インターフェースからタイプに変更）
  - [x] Article タイプ（インターフェースからタイプに変更）
- [x] データベース操作の実装
  - [x] Feed の CRUD 操作
  - [x] Article の CRUD 操作
  - [x] 既読管理機能（markAsRead/markAsUnread）
  - [x] お気に入り機能（toggleFavorite）
  - [x] カウント機能（countByFeedId/countUnread）
- [x] テストの作成
  - [x] Feedモデルのテスト（14テスト）
  - [x] Articleモデルのテスト（23テスト）

### データベースの改善 ✅ 完了 (2025-06-28)

- [x] 日時型をUNIXタイムスタンプに変更（Issue #11）
  - [x] スキーマをDATETIME型からINTEGER型に変更
  - [x] モデル層で秒⇔ミリ秒の変換処理を実装
  - [x] タイムスタンプ変換ユーティリティ関数の作成
  - [x] エラーハンドリングの追加
  - [x] テストの追加（15テスト）
  - [x] 日付型フィールドの変換処理を汎用化（レビュー対応）

### サービス層の実装 ✅ 完了 (2025-06-28)

- [x] RSS フィードクローラーの実装
  - [x] RSS パーサーの選定と実装（rss-parser採用）
  - [x] フィード取得ロジック
  - [x] エラーハンドリング（カスタムエラークラス実装）
- [x] フィード管理サービス（FeedService）
  - [x] フィードの追加・削除
  - [x] 記事の既読管理
  - [x] お気に入り管理
  - [x] フィード更新機能（単一/全体）
- [x] テストの作成
  - [x] RSSCrawlerのテスト（16テスト）
  - [x] FeedServiceのテスト（22テスト）

## フェーズ3: ユーザーインターフェース

### CLI の実装 ✅ 完了 (2025-06-28)

- [x] 基本的なCLIコマンドの実装
  - [x] フィード追加コマンド（add）
  - [x] フィード一覧表示コマンド（list）
  - [x] フィード削除コマンド（rm）
  - [x] フィード更新コマンド（update）
  - [x] 記事一覧表示コマンド（articles）
- [x] CLIフレームワークの導入（Commander.js）
- [x] エラーハンドリングとバリデーション
  - [x] 共通バリデーション関数の実装
  - [x] データベース接続管理の共通化
- [x] レビュー対応による改善
  - [x] エラーメッセージの表示改善
  - [x] 負数バリデーションの追加
  - [x] コード重複の解消

**現在のテストカバレッジ: 全93テスト（モデル層: 40、サービス層: 38、ユーティリティ: 15）**

### TUI の実装

- [ ] Ink のセットアップ
- [ ] 2ペインレイアウトの作成
- [ ] キーボードナビゲーションの実装

## フェーズ4: 品質保証

### テストとドキュメント

- [ ] ユニットテストの作成
- [ ] 統合テストの作成
- [ ] 使用方法のドキュメント作成

## フェーズ5: 将来的な拡張

- [ ] MCP Server 化の検討
- [ ] テーマシステムの設計